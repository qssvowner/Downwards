<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Downwards - Oficial</title>
    <style>
        body { margin: 0; background-color: #000; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; overflow: hidden; touch-action: none; color: white; }
        #game-container { position: relative; border-radius: 10px; overflow: hidden; border: 2px solid #444; box-shadow: 0 0 20px rgba(0, 255, 0, 0.2); }
        canvas { background-color: #111; display: block; cursor: crosshair; }
        .ui { text-align: center; margin-bottom: 10px; }
        #btn-config { position: absolute; top: 10px; left: 10px; font-size: 24px; cursor: pointer; z-index: 10; }
        #menu-opcoes { display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #222; padding: 20px; border: 2px solid #44ff44; border-radius: 10px; z-index: 100; width: 260px; text-align: center; }
        #menu-opcoes input { width: 90%; margin: 10px 0; padding: 8px; border-radius: 5px; border: 1px solid #444; background: #333; color: white; }
        #menu-opcoes button { padding: 10px; cursor: pointer; background: #eee; border: none; font-weight: bold; margin-top: 5px; width: 100%; border-radius: 5px; }
        #cheat-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999; flex-direction: column; align-items: center; justify-content: center; color: #ff4444; text-align: center; }
    </style>
</head>
<body>

<div class="ui">
    <h1>Downwards</h1>
    <div style="font-size: 20px;">Pontos: <span id="pontos">0</span></div>
</div>

<div id="game-container">
    <div id="btn-config">⚙️</div>
    <div id="menu-opcoes">
        <h3>CONTA</h3>
        <div id="area-login">
            <input type="text" id="user" placeholder="Usuário">
            <input type="password" id="pass" placeholder="Senha">
            <button onclick="login()" style="background: #44ff44;">Entrar</button>
        </div>
        <button onclick="fecharMenu()" style="background: #666; color: white; margin-top: 10px;">Voltar</button>
    </div>
    <canvas id="game-canvas"></canvas>
</div>

<div id="cheat-overlay">
    <h2>⚠ TRAPAÇA DETECTADA</h2>
    <button onclick="location.reload()" style="padding: 10px 20px; cursor: pointer;">Recomeçar</button>
</div>

<script>
    // --- LÓGICA DO JOGO ---
    const canvas = document.getElementById('game-canvas');
    const ctx = canvas.getContext('2d');
    const pontosDisplay = document.getElementById('pontos');
    
    canvas.width = 350;
    canvas.height = 500;

    let score = 0;
    let jogoAtivo = false;
    let jogoIniciado = false;
    let obstaculos = [];
    const player = { x: canvas.width / 2, y: canvas.height - 60 };

    // Anti-Cheat Simples
    const AntiCheat = {
        check: () => {
            if (score > 0 && score % 10 !== 0) { // Se o score não for múltiplo de 10 (valor do incremento)
                document.getElementById('cheat-overlay').style.display = 'flex';
                jogoAtivo = false;
            }
        }
    };

    function desenharTelaInicial() {
        ctx.fillStyle = "#111";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#44ff44";
        ctx.textAlign = "center";
        ctx.font = "bold 20px Arial";
        ctx.fillText("CLIQUE PARA JOGAR", canvas.width/2, canvas.height/2);
    }

    function spawnObstacle() {
        if (!jogoAtivo) return;
        obstaculos.push({
            x: Math.random() * (canvas.width - 30) + 15,
            y: -30,
            speed: 3 + (score / 100)
        });
        setTimeout(spawnObstacle, Math.max(400, 1000 - (score * 2)));
    }

    function atualizar() {
        if (!jogoIniciado) {
            desenharTelaInicial();
            requestAnimationFrame(atualizar);
            return;
        }

        if (!jogoAtivo) return;

        ctx.fillStyle = "#1a1a1a";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Player
        ctx.fillStyle = "white";
        ctx.font = "40px Arial";
        ctx.fillText("■", player.x, player.y);

        // Obstáculos
        for (let i = obstaculos.length - 1; i >= 0; i--) {
            let o = obstaculos[i];
            o.y += o.speed;
            ctx.fillStyle = "#ff4444";
            ctx.fillText("?", o.x, o.y);

            // Colisão
            if (Math.abs(player.x - o.x) < 20 && Math.abs(player.y - o.y) < 25) {
                jogoAtivo = false;
                alert("Fim de Jogo! Pontos: " + score);
                location.reload();
            }

            if (o.y > canvas.height) {
                obstaculos.splice(i, 1);
                score += 10;
                pontosDisplay.innerText = score;
                AntiCheat.check();
            }
        }
        requestAnimationFrame(atualizar);
    }

    // Controles
    canvas.addEventListener('mousemove', (e) => {
        const rect = canvas.getBoundingClientRect();
        player.x = e.clientX - rect.left;
    });

    canvas.addEventListener('click', () => {
        if (!jogoIniciado) {
            jogoIniciado = true;
            jogoAtivo = true;
            spawnObstacle();
        }
    });

    document.getElementById('btn-config').onclick = () => {
        document.getElementById('menu-opcoes').style.display = 'block';
        jogoAtivo = false;
    };

    function fecharMenu() {
        document.getElementById('menu-opcoes').style.display = 'none';
        if (jogoIniciado) jogoAtivo = true;
        atualizar();
    }

    atualizar();
</script>
</body>
</html>
